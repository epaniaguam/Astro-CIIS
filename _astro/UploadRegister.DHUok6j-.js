import{j as e}from"./jsx-runtime.2X-s0L5T.js";import{C as v}from"./CustomDropzone.Dbm9MbiS.js";import{r as a}from"./index.DeEakWXg.js";import{U as y}from"./endpoints.DprMjbcE.js";import{u as m,D as p}from"./Dialog.DmsGN8OU.js";import{u as C}from"./use-auth.rOUrmiGH.js";import{A as D,a as A}from"./AuthContext.DqYb_8L8.js";import"./index.1ed9f0e0.yZz4GDd3.js";import"./index.35f4d4a6.DGW6ehmJ.js";import"./auth.wxBLcJ7l.js";function N({idWorkshop:t}){const{user:n,updateUser:u}=C(),[x,l]=a.useState(!1),[o,h]=a.useState(null),[i,g]=a.useState(null),c=m(),r=m(),f=j=>{j.preventDefault(),l(!0);const d=new FormData;o&&d.append("payment_doc",o),fetch(y.workshop.one(t).participant,{method:"POST",body:d,credentials:"include"}).then(async s=>{if(s.ok)return s.json();throw await s.json()}).then(s=>{n.talleres.push({id:t,state:0}),u(n),c.handleOpen()}).catch(s=>{console.log(s);const{error:b="Ha ocurrido un error",reason:w="En este momento el servidor no está disponible, inténtelo más tarde"}=s;g(w),r.handleOpen(),l(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(p,{style:{top:20,position:"fixed"},icon:"success",message:"Registro exitoso. Estás a un solo paso de ser parte de este taller.",open:c.open,onClose:()=>{location.href="/dashboard/workshops"}}),i&&e.jsx(p,{style:{top:20,position:"fixed"},icon:"warning",message:i,open:r.open,onClose:r.handleClose}),e.jsxs("div",{className:"p-5 rounded-lg w-[96%] mx-auto bg-[var(--color-bg-uploadFormContainer)] max-w-[576px]",children:[e.jsx("div",{className:"grid grid-cols-1 mb-5",children:e.jsxs("div",{children:[e.jsx("span",{className:"block text-2xl text-[#BABABA] mb-5 text-center",children:"Voucher de pago"}),e.jsx(v,{selectedFile:o,setselectedFile:h}),e.jsxs("div",{className:"flex items-center justify-center mt-2",children:[e.jsx("svg",{className:"fill-gray-300 w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"})}),e.jsx("p",{className:"text-sm text-gray-300 rounded-md",children:"Ingresar una imagen que evidencie la transacción realizada"})]})]})}),e.jsx("div",{className:"w-full text-center mt-7",children:e.jsx("button",{type:"button",className:"w-48 px-12 py-3 rounded-md bg-[#3e5ba380] text-white font-semibold cursor-pointer transition-colors hover:bg-[#3e5ba370]",onClick:f,disabled:x,children:"Inscribirse"})})]})]})}const O=({idWorkshop:t})=>e.jsx(D,{children:e.jsx(A,{children:e.jsx(N,{idWorkshop:t})})});export{O as default};
