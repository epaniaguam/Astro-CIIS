import{j as e}from"./jsx-runtime.2X-s0L5T.js";import{C as j}from"./CustomDropzone.Dbm9MbiS.js";import{C as z}from"./config.CKCCSyrI.js";import{r as a}from"./index.DeEakWXg.js";import{U as D}from"./endpoints.DprMjbcE.js";import{u as b,D as v}from"./Dialog.DmsGN8OU.js";import{u as M}from"./use-auth.rOUrmiGH.js";import{A as B}from"./AuthContext.DqYb_8L8.js";import"./index.1ed9f0e0.yZz4GDd3.js";import"./index.35f4d4a6.DGW6ehmJ.js";import"./auth.wxBLcJ7l.js";function E({tipoplan:t,idEvent:o,typeEvent:l}){const{user:w,updateStatusUser:N}=M(),[x,p]=a.useState(!1),[n,y]=a.useState(null),[i,C]=a.useState(null),[u,F]=a.useState(null),[h,I]=a.useState(""),g=b(),c=b(),d=["delegaciones","estudiantesunjbg","estudiantesesis"].includes(t),f=m=>{m.preventDefault(),p(!0);const r=new FormData;r.append("scholar_code",h),n&&r.append("payment_doc",n),i&&r.append("scholar_doc",i),fetch(D.events.one(o).reservation.ciis(t,l),{method:"POST",body:r,credentials:"include"}).then(async s=>{if(s.ok)return s.json();throw await s.json()}).then(s=>{N(w),g.handleOpen()}).catch(s=>{const{error:S="Ha ocurrido un error",reason:A="En este momento el servidor no está disponible, inténtelo más tarde"}=s;F(A),c.handleOpen(),p(!1)})};return e.jsxs(e.Fragment,{children:[e.jsx(v,{style:{top:20,position:"fixed"},icon:"success",message:"Registro exitoso. Estás a un solo paso de ser parte de este evento.",open:g.open,onClose:()=>{location.href="/dashboard"}}),u&&e.jsx(v,{style:{top:20,position:"fixed"},icon:"warning",message:u,open:c.open,onClose:c.handleClose}),e.jsxs("div",{className:`p-5 rounded-lg w-[96%] max-w-[1200px] mx-auto bg-[var(--color-bg-uploadFormContainer)] ${!d&&"max-w-[576px]"}`,children:[e.jsxs("div",{className:`grid ${d?"grid-cols-1 md:grid-cols-2 gap-8":"grid-cols-1"} mb-5`,children:[e.jsxs("div",{children:[e.jsx("span",{className:"block text-2xl text-[#BABABA] mb-5 text-center",children:"Voucher de pago"}),e.jsx(j,{selectedFile:n,setselectedFile:y}),e.jsxs("div",{className:"flex items-center justify-center mt-2",children:[e.jsx("svg",{className:"fill-gray-300 w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"})}),e.jsx("p",{className:"text-sm text-gray-300 rounded-md",children:"Ingresar una imagen que evidencie la transacción realizada"})]})]}),d&&e.jsxs("div",{children:[e.jsx("span",{className:"block text-2xl text-[#BABABA] mb-5 text-center",children:"Ficha de matrícula"}),e.jsx(j,{selectedFile:i,setselectedFile:C}),e.jsxs("div",{className:"flex items-center justify-center mt-2",children:[e.jsx("svg",{className:"fill-gray-300 w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"})}),e.jsx("p",{className:"text-sm text-gray-300 rounded-md",children:"La ficha de matrícula la puede obtener ingresando al intranet"})]})]})]}),e.jsx("div",{className:"w-full text-center mt-7",children:t==="delegaciones"?e.jsxs("div",{className:"flex flex-col gap-5 items-center",children:[e.jsx("div",{className:"bg-[#d9d9d91a] rounded-md w-full",children:e.jsxs("div",{className:"flex flex-col items-center gap-4 p-2 md:flex-row",children:[e.jsx("span",{className:"block text-lg text-gray-300",children:"Código de delegación"}),e.jsx("input",{type:"text",placeholder:"Ejemplo: UNIGOTOCIIS",value:h,onChange:m=>{I(m.target.value)},className:"w-full h-[40px] px-5 outline outline-2 outline-gray-700 border-none rounded-xl bg-[var(--color-bg-input-informacion)] text-[var(--color-text-input-informacion)] text-sm md:w-1/2"}),e.jsxs("div",{className:"flex items-center justify-center mt-2",children:[e.jsx("svg",{className:"fill-gray-300 w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",children:e.jsx("path",{d:"M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"})}),e.jsxs("p",{className:"text-sm text-gray-300 rounded-md",children:["Ingresar el código brindado en la invitación al CIIS $",z]})]})]})}),e.jsx("button",{type:"button",className:"w-48 px-12 py-3 rounded-md bg-[#3e5ba380] text-white font-semibold cursor-pointer transition-colors hover:bg-[#3e5ba370]",onClick:f,disabled:x,children:"Inscribirse"})]}):e.jsx("button",{type:"button",className:"w-48 px-12 py-3 rounded-md bg-[#3e5ba380] text-white font-semibold cursor-pointer transition-colors hover:bg-[#3e5ba370]",onClick:f,disabled:x,children:"Inscribirse"})})]})]})}const H=({tipoplan:t,idEvent:o,typeEvent:l})=>e.jsx(B,{children:e.jsx(E,{tipoplan:t,idEvent:o,typeEvent:l})});export{H as default};
